[Unit]
Description=Gunicorn service for pi bot backend
After=network.target
After=usbgadget.service
Requires=usbgadget.service
FailureAction=reboot

[Service]
User=pibot
Group=pibot
WorkingDirectory=/opt/switch-control
ExecStart=/opt/switch-control/venv/bin/python -m flask run -h 0.0.0.0
Restart=on-failure
KillMode=process
TimeoutSec=30

[Install]
WantedBy=multi-user.target